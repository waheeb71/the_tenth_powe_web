"""
ุณูุฑูุจุช ูุฅุถุงูุฉ ุจุฑููุจุช ุฐูุงุก ุงุตุทูุงุนู ุงูุชุฑุงุถู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
"""
import asyncio
from database import AsyncSessionLocal
from models import SiteConfig
from sqlalchemy import select

DEFAULT_PROMPT = """ุฃูุช ูุณุงุนุฏ ุฐูู ูุชุฎุตุต ูุดุฑูุฉ 'ุงูููุฉ ุงูุนุงุดุฑุฉ ููููุฏุณุฉ ูุงูููุงููุงุช'.

ูุนูููุงุช ุนู ุงูุดุฑูุฉ:
- ุดุฑูุฉ ุณุนูุฏูุฉ ูุชุฎุตุตุฉ ูู ุงูููุฏุณุฉ ูุงูููุงููุงุช
- ุชูุฏู ุฎุฏูุงุช: ุงููุงุฌูุงุช ุงูุฒุฌุงุฌูุฉุ ุงูููุงูู ุงููููุงุฐูุฉุ ุชูุณูุฉ ุงูุฃูููููู (ุงูููุงุฏููุฌ)
- ุชุชููุฒ ุจุฌูุฏุฉ ุนุงููุฉ ูุฎุจุฑุฉ ูุงุณุนุฉ ูู ุงููุดุงุฑูุน ุงููุจุฑู

ูููุชู:
1. ุงูุฅุฌุงุจุฉ ุนูู ุงุณุชูุณุงุฑุงุช ุงูุนููุงุก ุนู ุฎุฏูุงุช ุงูุดุฑูุฉ
2. ุชูุฏูู ูุนูููุงุช ุชูููุฉ ุนู ุงููุดุงุฑูุน ุงูููุฏุณูุฉ
3. ูุณุงุนุฏุฉ ุงูุนููุงุก ูู ููู ุงูุนูููุงุช ูุงูุชูููุงุช ุงููุณุชุฎุฏูุฉ
4. ุชูุฌูู ุงูุนููุงุก ููุชูุงุตู ูุน ูุฑูู ุงููุจูุนุงุช ููุญุตูู ุนูู ุนุฑูุถ ุฃุณุนุงุฑ

ุฃุณููุจ ุงูุฑุฏ:
- ุงุณุชุฎุฏู ุงููุบุฉ ุงูุนุฑุจูุฉ ุงููุตุญู ุงูุจุณูุทุฉ
- ูู ููููุงู ููููุฏุงู
- ูุฏู ุฅุฌุงุจุงุช ูุงุถุญุฉ ููุฎุชุตุฑุฉ
- ุฅุฐุง ูู ุชูู ูุชุฃูุฏุงู ูู ุดูุกุ ุฃุฎุจุฑ ุงูุนููู ุจุงูุชูุงุตู ูุน ูุฑูู ุงูุดุฑูุฉ ูุจุงุดุฑุฉ
"""

async def init_ai_prompt():
    """ุฅุถุงูุฉ ุงูุจุฑููุจุช ุงูุงูุชุฑุงุถู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅุฐุง ูู ููู ููุฌูุฏุงู"""
    async with AsyncSessionLocal() as session:
        # ุงูุชุญูู ูู ูุฌูุฏ ุงูุจุฑููุจุช
        stmt = select(SiteConfig).where(SiteConfig.key == "ai_prompt")
        result = await session.execute(stmt)
        existing = result.scalar_one_or_none()
        
        if existing:
            print("โ ุงูุจุฑููุจุช ููุฌูุฏ ุจุงููุนู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช")
            print(f"ุงููููุฉ ุงูุญุงููุฉ: {existing.value[:100]}...")
        else:
            # ุฅุถุงูุฉ ุงูุจุฑููุจุช ุงูุงูุชุฑุงุถู
            new_config = SiteConfig(
                key="ai_prompt",
                value=DEFAULT_PROMPT,
                type="text",
                group="ai"
            )
            session.add(new_config)
            await session.commit()
            print("โ ุชู ุฅุถุงูุฉ ุงูุจุฑููุจุช ุงูุงูุชุฑุงุถู ุฅูู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุจูุฌุงุญ!")

if __name__ == "__main__":
    print("๐ ุชููุฆุฉ ุจุฑููุจุช ุงูุฐูุงุก ุงูุงุตุทูุงุนู...")
    asyncio.run(init_ai_prompt())
    print("โ ุชูุช ุงูุนูููุฉ ุจูุฌุงุญ!")
